{% extends 'base.html' %}
{% load static %}
{% load static %}

{% block content %}
<div class="breadcrumbs-area">
    <h3>Scan QR Code</h3>
    <ul>
        <li>
            <a href="{% url 'accounts:dashboard' %}">Home</a>
        </li>

        <li>Scan QR Code</li>
    </ul>
</div>
<!-- Breadcubs Area End Here -->
<!-- Student Details Area Start Here -->
<div class="card height-auto">
    <div class="card-body">
        <div class="heading-layout1">
            <div class="item-title">
                <h3>Scan QR Code</h3>
            </div>
            <div class="dropdown">
                <a class="dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-expanded="false">...</a>

                <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" href="#"><i class="fas fa-times text-orange-red"></i>Close</a>
                    <a class="dropdown-item" href="#"><i class="fas fa-cogs text-dark-pastel-green"></i>Edit</a>
                    <a class="dropdown-item" href="#"><i class="fas fa-redo-alt text-orange-peel"></i>Refresh</a>
                </div>
            </div>



        </div>
        
    </div>
    <div id="reader" width="600px"></div>

    <script src="{% static 'js/html5-qrcode.min.js' %}"></script>
    <script>
        function onScanSuccess(decodedText, decodedResult) {
            // handle the scanned code as you like, for example:
            // console.log(`Code matched = ${decodedText}`, decodedResult);

            console.log(`Code matched = ${decodedText}`)
            window.location.href = `http://127.0.0.1:8000/students/${decodedText}/`;

        }

        function onScanFailure(error) {
            // handle scan failure, usually better to ignore and keep scanning.
            // for example:

        }

        let html5QrcodeScanner = new Html5QrcodeScanner(
            "reader",
            { fps: 10, qrbox: { width: 250, height: 250 } },
        /* verbose= */ false);
        html5QrcodeScanner.render(onScanSuccess, onScanFailure);
    </script>





    {% endblock %}